# 移动端派工系统需求文档

## 1. 项目背景

为了提高工厂生产效率和设备管理水平，需要开发一套移动端派工系统，实现设备生产任务的移动化管理。

## 2. 系统用户

- **移动端用户**: 生产现场操作人员
- **后台管理员**: 生产管理人员、系统管理员

## 3. 功能需求

### 3.1 移动端功能需求

#### 3.1.1 用户登录
- 预设账号: admin
- 预设密码: 123456
- 登录验证后进入主功能页面

#### 3.1.2 主功能页面
- 工业风格UI设计
- 5个功能模块，每个模块配有图标:
  1. 设备派工 📋
  2. 设备停止生产 ⏹️
  3. 设备报修 🔧
  4. 设备状态查询 📊
  5. PLC IP设定 ⚙️

#### 3.1.3 设备派工功能

**输入项:**
- 派工单号 (文本输入)
- 预计生产数量 (数字输入)
- 生产设备型号选择:
  - CNC (CNC01~CNC16)
  - CCM08 (CCM08-01~CCM08-24)
  - CCM23 (CCM23-01~CCM23-06)

**操作流程:**
1. 填写派工信息
2. 点击"开始生产"按钮
3. 弹窗确认派工信息
4. 确认后执行PLC通信:
   - 连接PLC (使用功能5设定的IP)
   - 对选定设备的清零点位写入1
   - 等待1秒后查询数据点位是否为0
   - 最多查询3次，如不为0则提示错误
5. 成功后将派工信息写入数据库
6. 清空输入表单

#### 3.1.4 设备停止生产功能

**显示信息:**
- 设备编号
- 派工单号
- 预计生产数量
- 当前已生产数量
- 生产启动时间
- 完成比例 (当前数量/预计数量)

**操作流程:**
1. 卡片式展示正在生产的设备
2. 选择要停止的派工单
3. 弹窗确认停止信息
4. 确认后记录停止时间和完成数量
5. 更新数据库记录

#### 3.1.5 设备状态查询功能

**显示内容:**
- 所有48台设备状态:
  - AOI设备 (AOI-01~AOI-02)
  - CNC设备 (CNC-01~CNC-16)
  - CCM08设备 (CCM08-01~CCM08-24)
  - CCM23设备 (CCM23-01~CCM23-06)

**设备状态:**
- 生产中 (显示绑定的派工单号)
- 闲置
- 维修中

#### 3.1.6 设备报修功能

**功能描述:**
- 选择需要报修的设备
- 报修后该设备不能被派工选择
- 提供"已修复"选项恢复设备可用状态

#### 3.1.7 PLC IP设定功能

**设定项:**
- PLC IP地址
- 端口号
- 连接超时时间
- 保存设定供后续TCP通信使用

### 3.2 后台管理功能需求

#### 3.2.1 角色管理
- 新增用户账号
- 设置用户密码
- 用户权限管理

#### 3.2.2 生产记录查询

**查询条件:**
- 时间范围
- 派工单号
- 设备编号
- 生产状态

**显示信息:**
- 派工单号
- 设备编号
- 开始时间
- 结束时间
- 预计数量
- 完成数量
- 完成率

#### 3.2.3 报表管理

**统计维度:**
- 按月统计
- 按设备统计
- 按时间段统计

**统计内容:**
- 各设备生产数量
- 设备利用率
- 完成率统计
- 故障率统计

## 4. 非功能需求

### 4.1 性能需求
- 页面响应时间 < 2秒
- 支持并发用户数 > 50
- PLC通信响应时间 < 1秒

### 4.2 可用性需求
- 系统可用性 > 99%
- 移动端兼容主流浏览器
- 响应式设计适配不同屏幕尺寸

### 4.3 安全需求
- 用户身份验证
- 数据传输加密
- 操作日志记录

### 4.4 兼容性需求
- 兼容现有PLC通信协议
- 与现有数据库系统集成
- 支持主流移动设备浏览器

## 5. 约束条件

- 使用现有Java和MySQL版本
- 不重复安装其他依赖
- 所有文件保存在PDA文件夹
- 工业风格UI设计要求