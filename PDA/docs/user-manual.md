# 移动端派工系统操作手册

## 1. 系统概述

### 1.1 系统简介
移动端派工系统是一套专为工业生产环境设计的设备管理和生产调度系统，支持48台设备的统一管理，包括AOI、CNC、CCM08、CCM23四种设备类型。

### 1.2 系统特点
- 移动端友好的响应式设计
- 工业风格界面，适合生产环境使用
- 实时PLC通信，确保数据准确性
- 完整的生产流程管理
- 详细的操作日志记录

## 2. 系统登录

### 2.1 访问系统
1. 打开手机浏览器
2. 输入系统地址：`http://[服务器IP]:8080`
3. 进入登录页面

### 2.2 用户登录
1. 输入用户名：`admin`
2. 输入密码：`123456`
3. 点击「登录」按钮
4. 登录成功后进入主菜单页面

### 2.3 注意事项
- 确保手机连接到内网WiFi
- 首次使用建议使用默认管理员账号
- 登录会话有效期为2小时

## 3. 主菜单功能

### 3.1 功能模块
登录成功后，主菜单显示5个功能模块：

1. **设备派工** - 创建生产任务
2. **停止生产** - 结束生产任务
3. **设备报修** - 设备故障报修
4. **状态查询** - 查看设备状态
5. **PLC设定** - 配置PLC连接

### 3.2 界面说明
- 每个功能模块都有对应的图标
- 点击模块图标进入对应功能页面
- 页面顶部显示当前用户和时间
- 底部有返回主菜单的导航

## 4. 设备派工操作

### 4.1 操作流程
1. 点击「设备派工」进入派工页面
2. 填写派工单号（必填）
3. 输入预计生产数量（必填）
4. 选择设备类型：
   - CNC（16台设备：CNC-01 ~ CNC-16）
   - CCM08（24台设备：CCM08-01 ~ CCM08-24）
   - CCM23（6台设备：CCM23-01 ~ CCM23-06）
5. 选择具体设备编号
6. 点击「开始生产」按钮

### 4.2 确认派工
1. 系统弹出确认对话框，显示：
   - 派工单号
   - 预计生产数量
   - 安排的设备编号
2. 确认信息无误后点击「确认排产」
3. 系统执行PLC通信验证：
   - 连接PLC设备
   - 对设备清零点位写入1
   - 等待1秒后查询数据点位
   - 验证设备状态（最多重试3次）

### 4.3 派工结果
- **成功**：显示「已安排生产」，数据保存到数据库，页面清空
- **失败**：显示「设备或网络有问题请检查」，不能安排生产

### 4.4 注意事项
- 派工单号不能重复
- 设备必须处于闲置状态才能派工
- 维修中的设备不能选择
- PLC通信失败时不能强制派工

## 5. 停止生产操作

### 5.1 查看生产中的设备
1. 点击「停止生产」进入页面
2. 系统以卡片形式显示所有生产中的设备：
   - 设备编号
   - 派工单号
   - 预计生产数量
   - 当前已生产数量
   - 生产开始时间
   - 完成比例（当前数量/预计数量）

### 5.2 停止生产流程
1. 选择要停止的派工单卡片
2. 点击「停止生产」按钮
3. 系统弹出确认对话框，显示：
   - 派工单号
   - 设备编号
4. 点击「确认」停止生产

### 5.3 停止结果
系统记录以下信息到数据库：
- 派工单号和设备编号
- 开始生产时间
- 结束生产时间
- 预计生产数量
- 实际完成数量
- 完成率计算

## 6. 设备状态查询

### 6.1 状态查询功能
1. 点击「状态查询」进入页面
2. 系统显示所有48台设备的当前状态：
   - **生产中**：显示绑定的派工单号
   - **闲置**：设备空闲，可以安排生产
   - **维修中**：设备故障，不能安排生产

### 6.2 设备信息显示
每台设备显示：
- 设备编号（如CNC-01）
- 设备类型
- 当前状态
- 状态图标
- 相关派工单号（如果有）

### 6.3 状态刷新
- 页面支持下拉刷新
- 自动定时刷新（每30秒）
- 手动点击刷新按钮

## 7. 设备报修操作

### 7.1 报修流程
1. 点击「设备报修」进入页面
2. 选择要报修的设备
3. 填写故障描述（可选）
4. 点击「提交报修」

### 7.2 报修确认
1. 系统弹出确认对话框
2. 确认设备编号和故障信息
3. 点击「确认报修」

### 7.3 报修结果
- 设备状态更新为「维修中」
- 如果设备正在生产，自动停止当前派工
- 记录报修时间和操作人员
- 该设备在派工时不可选择

### 7.4 设备修复
1. 设备修复完成后，进入报修页面
2. 找到对应的维修记录
3. 点击「已修复」按钮
4. 设备状态恢复为「闲置」
5. 可以重新安排生产

## 8. PLC IP设定

### 8.1 配置PLC连接
1. 点击「PLC设定」进入配置页面
2. 输入PLC IP地址（如：192.168.1.100）
3. 设置端口号（默认：502）
4. 设置连接超时时间（默认：5秒）
5. 点击「测试连接」验证配置
6. 连接成功后点击「保存配置」

### 8.2 连接测试
- 系统会尝试连接指定的PLC
- 显示连接状态和响应时间
- 连接失败时显示错误信息

### 8.3 配置说明
- PLC IP必须在同一网段
- 端口号通常为502（Modbus TCP标准）
- 超时时间建议设置为3-10秒
- 配置保存后立即生效

## 9. 后台管理功能

### 9.1 访问后台
1. 在电脑浏览器中访问：`http://[服务器IP]:8080/admin`
2. 使用管理员账号登录
3. 进入后台管理界面

### 9.2 角色管理
1. 点击「角色管理」菜单
2. 查看现有用户列表
3. 点击「新增用户」创建账号：
   - 输入用户名
   - 设置密码
   - 选择角色（管理员/普通用户）
   - 设置状态（启用/禁用）
4. 点击「保存」完成创建

### 9.3 生产记录查询
1. 点击「生产记录」菜单
2. 设置查询条件：
   - 时间范围（开始日期-结束日期）
   - 派工单号（可选）
   - 设备编号（可选）
   - 设备类型（可选）
3. 点击「查询」显示结果
4. 支持导出Excel报表

### 9.4 报表统计
1. 点击「报表统计」菜单
2. 选择统计维度：
   - 按月统计
   - 按设备统计
   - 按设备类型统计
3. 设置时间范围
4. 选择设备范围（全部/单一设备）
5. 点击「生成报表」
6. 查看统计图表和数据表格

## 10. 常见问题处理

### 10.1 登录问题
**问题**：无法登录系统
**解决方案**：
1. 检查网络连接
2. 确认服务器地址正确
3. 验证用户名密码
4. 清除浏览器缓存

### 10.2 PLC通信问题
**问题**：PLC连接失败
**解决方案**：
1. 检查PLC IP地址配置
2. 确认网络连通性（ping测试）
3. 检查PLC设备状态
4. 验证端口号设置
5. 检查防火墙设置

### 10.3 派工失败问题
**问题**：无法创建派工单
**解决方案**：
1. 检查设备状态（是否闲置）
2. 验证派工单号唯一性
3. 确认PLC通信正常
4. 检查设备是否在维修中

### 10.4 数据同步问题
**问题**：数据显示不准确
**解决方案**：
1. 刷新页面
2. 检查网络连接
3. 重新登录系统
4. 联系系统管理员

## 11. 系统维护

### 11.1 日常维护
- 定期备份数据库
- 清理系统日志
- 检查PLC连接状态
- 监控系统性能

### 11.2 故障排查
- 查看系统日志
- 检查数据库连接
- 验证PLC通信
- 分析错误信息

### 11.3 数据备份
- 每日自动备份数据库
- 重要操作前手动备份
- 定期测试备份恢复

## 12. 联系支持

### 12.1 技术支持
- 系统问题：联系IT部门
- 设备问题：联系设备维护人员
- 业务问题：联系生产管理部门

### 12.2 培训资源
- 用户操作视频教程
- 系统功能演示
- 常见问题FAQ
- 操作技巧分享

---

**版本信息**：v1.0  
**更新日期**：2025-01-08  
**适用范围**：移动端派工系统所有用户